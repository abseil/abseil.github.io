<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="title" content="Abseil open-source foundational code">
    <meta name="description" content="Battle-tested, Mom-approved">
    <title>abseil / Tip of the Week #86: Enumerating with Class</title>

    <!-- Fontawesome Icons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    
    <!-- Favicons -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico" />
    
    <!-- Bootstrap -->
    <link href="/libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Site style using SASS, generated by from style.scss -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Slick styling -->
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css"/>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick-theme.css"/>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- metadata -->
    <meta name="og:title" content="abseil / Tip of the Week #86: Enumerating with Class"/>
	 <meta name="og:description" content="An open-source collection of core C++ library code"/>
  </head>
  <body class=>

  	<nav id="sticky-nav">
  <div class="nav-container container">
    <div class="row">
      <div class="col-md-11 nofloat center-block">
        <a class="col-xs-2" href="/">
          <img class="nav-logo" src="/img/absl_18px.svg" alt="Abseil">
        </a>

        <div class="col-xs-2 col-xs-offset-8">
          <button type="button" class="hamburger navbar-toggle collapsed" data-target="#navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>

        <ul class="nav col-xs-10">
          
          <li><a href="/about" >About</a></li>
          <li><a href="/docs/" >Docs</a></li>
		  <li><a href="/tips/" class='current'>Tips</a></li>
          <li><a href="/blog/" >Blog</a></li>
          <li><a href="/community/" >Community</a></li>
        </ul>

      </div>
    </div>
  </div>

  <div class="top-nav right">
    
    <li class="nav-item"><a href="/"><p>Home</p></a><div class="nav-toggle icon-close"></div></li>
    <hr>
    <li class="nav-item"><a href="/about" ><p>About</p></a></li>
    <hr>
    <li class="nav-item"><a href="/docs/" ><p>Docs</p></a>
      <div class="nav-doc-toggle icon-caret"></div>
      <ul class="doc-list">
        <a href="/docs/cpp" ><li class="nav-doc-tab">C++ Devguide</li></a>
        <a href="/docs/cpp/quickstart" ><li class="nav-doc-tab">C++ Quick Start</li></a>
      </ul>
    </li>
    <hr>
    <li class="nav-item"><a href="/tips/" class='current'><p>Tips</p></a></li>
    <hr>
    <li class="nav-item"><a href="/blog/" ><p>Blog</p></a></li>
    <hr>
    <li class="nav-item"><a href="/community/" ><p>Community</p></a></li>
  </div>
</nav>


<div class="nav-hero-container">
	<nav id="common-nav">
  <div class="nav-container container">
    <div class="row">
      <div class="col-md-11 nofloat center-block">
        <a class="col-xs-2" href="/">
          <img class="nav-logo" src="/img/absl_80px.png" alt="Abseil">
        </a>

        <div class="col-xs-2 col-xs-offset-8">
          <button type="button" class="hamburger navbar-toggle collapsed" data-target="#navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>

        <ul class="nav col-xs-10">
          
          <li><a href="/about" >About</a></li>
          <li><a href="/docs/" >Docs</a></li>
          <li><a href="/tips/" class='current'>C++ Tips</a></li>
		  <li><a href="/blog/" >Blog</a></li>
          <li><a href="/community" >Community</a></li>
        </ul>

      </div>
    </div>
  </div>

  <div class="top-nav right">
    
    <li class="nav-item"><a href="/"><p>Home</p></a><div class="nav-toggle icon-close"></div></li>
    <hr>
    <li class="nav-item"><a href="/about/" ><p>About</p></a></li>
    <hr>
    <li class="nav-item"><a href="/docs/" ><p>Docs</p></a>
      <div class="nav-doc-toggle icon-caret"></div>
      <ul class="doc-list">
        <a href="/docs/cpp/quickstart" ><li class="nav-doc-tab">Quickstart</li></a>
      </ul>
    </li>
    <hr>
    <li class="nav-item"><a href="/blog/" ><p>Blog</p></a></li>
    <hr>
    <li class="nav-item"><a href="/tips/" class='current'><p>Tips</p></a></li>
    <hr>
    <li class="nav-item"><a href="/community/" ><p>Community</p></a></li>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-md-11 nofloat center-block">
        <div class="col-xs-12">
          <h1 class="page-headline"></h1> 
        </div>
      </div>
    </div>
  </div>

</nav>

   <a href="https://github.com/abseil/" class="fork-btn" target="_blank"></a>

</div>



<div class="container">
<div class="row">
<div class="col-md-12 nofloat center-block ">
<div class="col-sm-3">
<ul class="doc-side-nav">
   <li><h5 class="doc-side-nav-title">
    <a href="/tips/">C++ Tips</a></h5>
   </li>
   

   
     
   
     
   
     
   
     
   
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/1">TotW #1: string_view</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/42">TotW #42: Prefer Factory Functions to Initializer Methods</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/49">TotW #49: Argument-Dependent Lookup</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/55">TotW #55: Name Counting and unique_ptr</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/64">TotW #64: Raw String Literals</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/65">TotW #65: Putting Things in their Place</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/74">TotW #74: Delegating and Inheriting Constructors</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/77">TotW #77: Temporaries, Moves, and Copies</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/86">TotW #86: Enumerating with Class</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/94">TotW #94: Callsite Readability and bool Parameters</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/99">TotW #99: Nonmember Interface Etiquette</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/101">TotW #101: Return Values, References, and Lifetimes</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/107">TotW #107: Reference Lifetime Extension</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/109">TotW #109: Meaningful `const` in Function Declarations</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/112">TotW #112: emplace vs. push_back</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/119">TotW #119: Using-declarations and namespace aliases</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/122">TotW #122: Test Fixtures, Clarity, and Dataflow</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/123">TotW #123: <code>absl::optional</code> and <code>std::unique_ptr</code></a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/126">TotW #126: `make_unique` is the new `new`</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/130">TotW #130: Namespace Naming</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/131">TotW #131: Special Member Functions and `= default`</a></h6>
     </li>
     
   
     
     <li><h6 class="doc-side-nav-list-item">
         <a href="/tips/135">TotW #135: Test the Contract, not the Implementation</a></h6>
     </li>
     
   
 </ul>

</div>
<div class="col-sm-8 markdown">
<h1>Tip of the Week #86: Enumerating with Class</h1>
<p>Originally posted as totw/86 on 2015-01-05</p>

<p><em>By Bradley White <a href="mailto:bww@google.com">(bww@google.com)</a></em></p>

<p><em>“Show class, … and display character.” - Bear Bryant.</em></p>

<p>An enumeration, or simply an <strong>enum</strong>, is a type that can hold one of a
specified set of integers. Some values of this set can be given names, and are
called the enumerators.</p>

<h2 id="unscoped-enumerations">Unscoped Enumerations</h2>

<p>This concept will be familiar to C++ programmers, but prior to C++11
enumerations had two significant shortcomings: the enumeration names were:</p>

<ul>
  <li>in the same scope as the enum type, and</li>
  <li>implicitly convertible to values of some integer type.</li>
</ul>

<p>So, with C++98 …</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="k">enum</span> <span class="n">CursorDirection</span> <span class="p">{</span> <span class="n">kLeft</span><span class="p">,</span> <span class="n">kRight</span><span class="p">,</span> <span class="n">kUp</span><span class="p">,</span> <span class="n">kDown</span> <span class="p">};</span>
<span class="n">CursorDirection</span> <span class="n">d</span> <span class="o">=</span> <span class="n">kLeft</span><span class="p">;</span> <span class="c1">// OK: enumerator in scope
</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">kRight</span><span class="p">;</span>            <span class="c1">// OK: enumerator converts to int
</span></code></pre>
</div>

<p>but, …</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="c1">// error: redeclarations of kLeft and kRight
</span><span class="k">enum</span> <span class="n">PoliticalOrientation</span> <span class="p">{</span> <span class="n">kLeft</span><span class="p">,</span> <span class="n">kCenter</span><span class="p">,</span> <span class="n">kRight</span> <span class="p">};</span>
</code></pre>
</div>

<p>C++11 modified the behavior of unscoped enums in one way: the enumerators are
now local to the enum, but continue to be exported into the enum’s scope for
backwards compatibility.</p>

<p>So, with C++11 …</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="n">CursorDirection</span> <span class="n">d</span> <span class="o">=</span> <span class="n">CursorDirection</span><span class="o">::</span><span class="n">kLeft</span><span class="p">;</span>  <span class="c1">// OK in C++11
</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">CursorDirection</span><span class="o">::</span><span class="n">kRight</span><span class="p">;</span>             <span class="c1">// OK: still converts to int
</span></code></pre>
</div>

<p>but the declaration of <code class="highlighter-rouge">PoliticalOrientation</code> would still elicit errors.</p>

<h2 id="scoped-enumerations">Scoped Enumerations</h2>

<p>The implicit conversion to integer has been observed to be a common source of
bugs, while the namespace pollution caused by having the enumerators in the same
scope as the enum causes problems in large, multi-library projects. To address
both these concerns, C++11 introduced a new concept: the <strong>scoped enum</strong>.</p>

<p>In a scoped enum, introduced by the keywords <code class="highlighter-rouge">enum class</code>, the enumerators are:</p>

<ul>
  <li>only local to the enum (they are not exported into the enum’s scope), and</li>
  <li>not implicitly convertible to integer types.</li>
</ul>

<p>So, (note the additional class keyword) …</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="k">enum</span> <span class="k">class</span> <span class="nc">CursorDirection</span> <span class="p">{</span> <span class="n">kLeft</span><span class="p">,</span> <span class="n">kRight</span><span class="p">,</span> <span class="n">kUp</span><span class="p">,</span> <span class="n">kDown</span> <span class="p">};</span>
<span class="n">CursorDirection</span> <span class="n">d</span> <span class="o">=</span> <span class="n">kLeft</span><span class="p">;</span>                    <span class="c1">// error: kLeft not in this scope
</span><span class="n">CursorDirection</span> <span class="n">d2</span> <span class="o">=</span> <span class="n">CursorDirection</span><span class="o">::</span><span class="n">kLeft</span><span class="p">;</span>  <span class="c1">// OK
</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">CursorDirection</span><span class="o">::</span><span class="n">kRight</span><span class="p">;</span>              <span class="c1">// error: no conversion
</span></code></pre>
</div>

<p>and, …</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="c1">// OK: kLeft and kRight are local to each scoped enum
</span><span class="k">enum</span> <span class="k">class</span> <span class="nc">PoliticalOrientation</span> <span class="p">{</span> <span class="n">kLeft</span><span class="p">,</span> <span class="n">kCenter</span><span class="p">,</span> <span class="n">kRight</span> <span class="p">};</span>
</code></pre>
</div>

<p>These simple changes eliminate the problems with plain enumerations, so enum
class should be preferred in all new code.</p>

<p>Using a scoped enum does mean that you’ll have to explicitly cast to an integer
type should you still want such a conversion (e.g., when logging an enumeration
value, or when using bitwise operations on flag-like enumerators). Hashing with
<code class="highlighter-rouge">std::hash</code> will continue to work though (e.g.,
<code class="highlighter-rouge">std::unordered_map&lt;CursorDirection, int&gt;</code>).</p>

<h2 id="underlying-enumeration-types">Underlying Enumeration Types</h2>

<p>C++11 also introduced the ability to specify the underlying type for both
varieties of enumeration. Previously the underlying integer type of an enum was
determined by examining the sign and magnitude of the enumerators, but now we
can be explicit. For example, …</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="c1">// Use "int" as the underlying type for CursorDirection
</span><span class="k">enum</span> <span class="k">class</span> <span class="nc">CursorDirection</span> <span class="o">:</span> <span class="kt">int</span> <span class="p">{</span> <span class="n">kLeft</span><span class="p">,</span> <span class="n">kRight</span><span class="p">,</span> <span class="n">kUp</span><span class="p">,</span> <span class="n">kDown</span> <span class="p">};</span>
</code></pre>
</div>

<p>Because this enumerator range is small, and if we wished to avoid wasting space
when storing <code class="highlighter-rouge">CursorDirection</code> values, we could specify <code class="highlighter-rouge">char</code> instead.</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="c1">// Use "char" as the underlying type for CursorDirection
</span><span class="k">enum</span> <span class="k">class</span> <span class="nc">CursorDirection</span> <span class="o">:</span> <span class="kt">char</span> <span class="p">{</span> <span class="n">kLeft</span><span class="p">,</span> <span class="n">kRight</span><span class="p">,</span> <span class="n">kUp</span><span class="p">,</span> <span class="n">kDown</span> <span class="p">};</span>
</code></pre>
</div>

<p>The compiler will issue an error if an enumerator value exceeds the range of the
underlying type.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Prefer using <code class="highlighter-rouge">enum class</code> in new code. You’ll reduce namespace pollution, and
you may avoid bugs in implicit conversions.</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="k">enum</span> <span class="k">class</span> <span class="nc">Parting</span> <span class="p">{</span> <span class="n">kSoLong</span><span class="p">,</span> <span class="n">kFarewell</span><span class="p">,</span> <span class="n">kAufWiedersehen</span><span class="p">,</span> <span class="n">kAdieu</span> <span class="p">};</span>
</code></pre>
</div>

</div>

<div id="toc" class="col-sm-1"></div>
<br />
<a href="http://feeds.feedburner.com/abseilio"
    title="Subscribe to Abseil Blog &amp; Tips"
    rel="alternate"
    type="application/rss+xml">
    <img src="//feedburner.google.com/fb/images/pub/feed-icon32x32.png"
         alt="Subscribe to the Abseil Blog" style="border:0;">
    </img>
</a>
</div>
</div>
</div>




<footer>
    <div class="container">
        <div class="left-links">
            <img src="/img/typography_white.png" style="height:24px;"/>
            <p class="description">&copy;2017 Abseil | Live at Head</p>
        </div>
        <div class="right-links">
            <div class="col-md-4 col-sm-4 col-xs-12 footer-documentation">
                <ul class="toggle">
                    <a href="/about/"><p class="right-link-headers">About Abseil</p></a>
                    <li><a href="/about/intro"><p>Introduction</p></a></li>
                    <li><a href="/about/philosophy"><p>Philosophy</p></a></li>
                    <li><a href="/about/compatibility"><p>Compatibility</p></a></li>
                    <li><a href="/about/design/"><p>Design Notes</p><a></li>
                 </ul>
            </div>
            <hr class="footer-sections" />
            <div class="col-md-3 col-sm-3 col-xs-12 footer-resources">
                <ul class="toggle">
                    <a href="/docs/"><p class="right-link-headers">Dev Guides</p></a>
                    <li><a href="/docs/cpp.html"><p>C++</p></a></li>
                    <li><a href="/blog/"><p>Abseil Blog</p></a></li>
                </ul>
                </ul>
            </div>
            <hr class="footer-sections" />
            <div class="col-md-5 col-sm-5 col-xs-12 footer-community">
                <ul class="toggle">
                    <a href="/community/"><p class="right-link-headers">Community</p></a>
                    <li><a href="https://github.com/abseil/" target="_blank"><p class="github community-links">GitHub</p></a></li>
                    <li><a href="https://twitter.com/abseilio" target="_blank"><p class="twitter community-links">Twitter</p></a></li>
                    <li><a href="http://stackoverflow.com/tags/abseil/" target="_blank"><p class="stack-overflow community-links">Stack Overflow</p></a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>


    <script src="/libs/bootstrap/js/bootstrap.min.js"></script>
    <!-- Include SlickJS for carousel -->
    <script src="/js/slick.min.js"></script>
    <script src="/js/jquery.visible.min.js"></script>
    <!-- Include the common site javascript -->
    <script src="/js/common.js" type="text/javascript" charset="utf-8"></script>
    <!-- GA -->
    <script src="/js/waves.js"></script>
    <script src="/js/buttons.js"></script>
    
    

    
	
	<!-- Global Site Tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106933809-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments)};
	  gtag('js', new Date());

	  gtag('config', 'UA-106933809-1');
	</script>

  </body>
</html>
